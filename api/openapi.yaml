openapi: 3.0.0

info:
  version: 1.0.0
  title: "KINTAI"
  description: >-
    "勤怠管理アプリ「KINTAI」"

servers:
  - url: "http://localhost:8003"
    description: "ローカル環境"

tags:
  - name: "admin"
    description: "管理者の操作"

paths:
  /api/v1/admin/admins:
    get:
      summary: "全ての管理者の取得"
      tags: ["admin"]
      operationId: getAdmins
      deprecated: false
      responses:
        "200":
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Admins"
        "401":
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Unauthorized"
        "403":
          description: "Forbidden"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Forbidden"
        "500":
          description: "Forbidden"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
    post:
      summary: "管理者作成"
      tags: ["admin"]
      operationId: createAdmin
      deprecated: false
      requestBody:
        description: "管理者登録情報"
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAdmin"
      responses:
        "201":
          description: "Success"
        "400":
          description: "BadRequest"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequest"
        "401":
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Unauthorized"
        "403":
          description: "Forbidden"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Forbidden"
        "500":
          description: "Forbidden"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InternalServerError"
components:
  schemas:
    Admins:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 1
              name:
                type: string
                example: "example 管理者"
              email:
                type: string
                example: "kintai@example.com"
            required:
              - "id"
              - "name"
              - "email"
        pagenation:
          type: object
          properties:
            current:
              type: integer
              example: 1
            pages:
              type: integer
              example: 3
            totalCount:
              type: integer
              example: 30
      required:
        - data
    CreateAdmin:
      type: object
      properties:
        name:
          type: string
          example: "admin管理者"
        email:
          type: string
          example: "admin@example.com"
        password:
          type: string
          example: "password"
        password_confirmation:
          type: string
          example: "password"
    BadRequest:
      type: object
      properties:
        error_code:
          type: string
          example: "BadRequest"
        message:
          type: array
          items:
            example: "エラーメッセージ"
    Unauthorized:
      type: object
      properties:
        error_code:
          type: string
          example: "Unauthorized"
        message:
          type: array
          items:
            example: "ログインしてください"
    Forbidden:
      type: object
      properties:
        error_code:
          type: string
          example: "Forbidden"
        message:
          type: array
          items:
            example: "権限がありません"
    InternalServerError:
      type: object
      properties:
        error_code:
          type: string
          example: "InternalServerError"
        message:
          type: array
          items:
            example: "サーバーエラー"
# これからの参考にとりあえず残しておく
# /users:
#   get:
#     description: >
#       Returns all users
#     operationId: findUsers
#     parameters:
#       - name: tags
#         in: query
#         description: tags to filter by
#         required: false
#         style: form
#         schema:
#           type: array
#           items:
#             type: string
#       - name: limit
#         in: query
#         description: maximum number of results to return
#         required: false
#         schema:
#           type: integer
#           format: int32
#     responses:
#       "200":
#         description: user response
#         content:
#           application/json:
#             schema:
#               type: array
#               items:
#                 $ref: "#/components/schemas/User"
#       default:
#         description: unexpected error
#         content:
#           application/json:
#             schema:
#               $ref: "#/components/schemas/Error"
# components:
#   schemas:
#     User:
#       type: "object"
#       required:
#         - "name"
#       properties:
#         id:
#           type: "integer"
#           format: "int64"
#           example: 100
#         name:
#           type: "string"
#           example: "Taro"
#         status:
#           type: "string"
#           description: "user status"
#           enum:
#             - "pending"
#             - "active"
#             - "inactive"
#     Error:
#       type: "object"
#       properties:
#         code:
#           type: "integer"
#           format: "int32"
#         type:
#           type: "string"
#         message:
#           type: "string"
# externalDocs:
#   description: "Find out more about Swagger"
#   url: "http://swagger.io"
